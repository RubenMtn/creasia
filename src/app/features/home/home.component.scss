/* ============================================================================
   Home – Hero con vídeo, puntos, conectores y enlaces (botones)
   Limpio, comentado y con breakpoints unificados.
   ========================================================================== */
@use "tokens" as *;
@use "breakpoints" as *;
@use "foundation" as f;

/* 1) Shell / contenedor hero */
.hero {
  position: relative;
  display: grid;
  place-items: center;
  padding: $space-2 0;
}
.hero.skip-to-end {
  .video, .image { transition: none; }
  .link {
    transition: none; animation: none;
    transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(1);
    opacity: 1;
  }
  .point, .lines-layer line { transition: none; animation: none; }
}

/* 2) Media (vídeo/imagen) */
.media-wrap {
  position: relative;
  width: 100%;
  line-height: 0;
  max-height: clamp(340px, 60vh, 580px); /* evita que el vídeo tape todo */
  margin: 0 auto;
}
.layer { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: contain; display: block; }
.video { z-index: 2; transition: opacity 900ms ease; }
.video.fade-out { opacity: 0; }
.image { z-index: 1; opacity: 0; transition: opacity 1000ms ease; }
.image.visible { opacity: 1; }

/* 3) Puntos */
.points-layer { z-index: 4; pointer-events: none; }
.point {
  position: absolute; width: 5px; height: 5px; border-radius: 50%;
  background: #fff; box-shadow: 0 0 3px rgba(0,0,0,.35);
  transform: translate(-50%, -50%);
  transition: top 180ms ease, left 180ms ease, transform 180ms ease;
  will-change: top, left, transform;
}

/* 4) Enlaces (botones) – doble línea y fondo translúcido */
.link-layer { position: absolute; inset: 0; z-index: 5; pointer-events: none; }
.link {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%) scale(0.05);
  opacity: 0; pointer-events: auto;

  /* Base común desde Foundation (fondo y tipografía) */
  @include f.btn-ghost(var(--btn-bg), var(--btn-border), .5rem, .35rem, .6rem, .82rem);

  /* Doble línea */
  flex-direction: column; /* apila texto superior/inferior */
  inline-size: fit-content; min-inline-size: 8ch; max-inline-size: 26ch;

  /* Nitidez */
  text-shadow: none; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;

  /* Animación de entrada */
  will-change: transform, opacity;
  animation: popInMove 900ms cubic-bezier(0.2, 0.7, 0.2, 1) forwards;

  &:hover { outline: 2px solid rgba(255,255,255,.30); }
  &:active { scale: .985; }
}

/* Primera línea (texto amarillo más grande) */
// .link { display: inline-flex; flex-direction: column; gap: .15em; line-height: 1.15; color: gold; font: bold; }

/* Segunda línea (texto descriptivo más pequeño) */
.link .label-bottom { font-size: .6em; color: white; }

/* Posiciones relativas de cada botón */
.l-top-left  { --tx: -28vw; --ty: -12vh; }
.l-mid-left  { --tx: -28vw; --ty:   0vh; }
.l-bot-left  { --tx: -28vw; --ty:  12vh; }
.l-top-right { --tx:  28vw; --ty: -12vh; }
.l-mid-right { --tx:  28vw; --ty:   0vh; }
.l-bot-right { --tx:  28vw; --ty:  12vh; }

/* 5) Conectores */
.lines-layer { z-index: 3; pointer-events: none; } /* una sola definición */
.lines-layer line {
  /* Grosor sólo si usas <line> (los polígonos usan fill) */
  stroke-width: 3.7;
  stroke-linecap: round;
  vector-effect: non-scaling-stroke;
  shape-rendering: geometricPrecision;
}
.lines-layer polygon { shape-rendering: geometricPrecision; }

/* 6) Títulos y descripciones */
.title-below, .caption-below {
  width: 100%; align-self: stretch; text-align: center; color: $text-light;
  max-width: min(72ch, 92%); opacity: 0; transform: translateY(6px);
  animation: captionIn 500ms ease 160ms forwards;
}
.title-below { margin: clamp($space-2, 4vh, $space-3 * 1.5) auto 0; }
.caption-below {
  margin: $space-1 auto 0;
  background: radial-gradient(circle at center,
    rgba(0,0,0,.85) 0%,
    rgba(0,0,0,.55) 38%,
    rgba(0,0,0,.22) 68%,
    rgba(0,0,0,0) 100%);
}

/* 7) Animaciones clave */
@keyframes popInMove {
  0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
  60% { opacity: 1; }
  100% { transform: translate(calc(-50% + var(--tx)), calc(-50% + var(--ty))) scale(1); opacity: 1; }
}
@keyframes captionIn { to { opacity: 1; transform: translateY(0); } }

/* 8) Responsive (3 tamaños claros) */
@include for-mobile {
  .hero { padding: $space-1 0; }
  .title-below { margin: $space-1 auto 0; }
}
@include from-tablet {
  .media-wrap { max-height: clamp(360px, 58vh, 540px); }
  
  .link { @include f.btn-ghost(var(--btn-bg), var(--btn-border), .5rem, .55rem, .9rem, .9rem); }
  .l-top-left  { --tx: -32vw; --ty: -18vh; }
  .l-mid-left  { --tx: -32vw; --ty:   0vh; }
  .l-bot-left  { --tx: -32vw; --ty:  18vh; }
  .l-top-right { --tx:  32vw; --ty: -18vh; }
  .l-mid-right { --tx:  32vw; --ty:   0vh; }
  .l-bot-right { --tx:  32vw; --ty:  18vh; }
}
@include from-desktop {
  .media-wrap { max-height: clamp(380px, 54vh, 520px); }
  
  .link { @include f.btn-ghost(var(--btn-bg), var(--btn-border), .5rem, .65rem, 1.05rem, 1rem); }
  .l-top-left  { --tx: -30vw; --ty: -16vh; }
  .l-mid-left  { --tx: -30vw; --ty:   0vh; }
  .l-bot-left  { --tx: -30vw; --ty:  16vh; }
  .l-top-right { --tx:  30vw; --ty: -16vh; }
  .l-mid-right { --tx:  30vw; --ty:   0vh; }
  .l-bot-right { --tx:  30vw; --ty:  16vh; }
}

/* 9) Colores de las dos líneas del botón (tras los breakpoints para que prevalezcan) */
.link .label-top    { color: gold; font-weight: 700; }
.link .label-bottom { color: #ffffff; }