<section class="hero" [class.skip-to-end]="skipToEnd">
  <div #mediaWrap class="media-wrap" [style.aspect-ratio]="frameAR">
    <video #vid class="layer video" src="assets/video/facev.mp4" autoplay muted playsinline preload="metadata"
      disablepictureinpicture controlslist="nodownload noplaybackrate noremoteplayback" (loadedmetadata)="onMeta(vid)"
      (ended)="startFade(vid)" (transitionend)="onFadeEnd($event)" [class.fade-out]="fading">
    </video>
    <img class="layer image" src="assets/images/facedok.png" alt="Ilustracion" [class.visible]="showImage">

    @if (showPoints) {
    <div class="layer points-layer" aria-hidden="true">
      @for (point of scaledPoints; track point.id) {
      <span #facePoint class="point" [attr.data-point]="point.id" [style.left.%]="point.left" [style.top.%]="point.top">
      </span>
      }
    </div>
    }

    @if (showConnectors && connectors.length) {
    <svg class="layer lines-layer" viewBox="0 0 100 100" preserveAspectRatio="none">
      @for (conn of connectors; track conn.id) {
      <line [attr.x1]="conn.x1" [attr.y1]="conn.y1" [attr.x2]="conn.x2" [attr.y2]="conn.y2"
        [attr.stroke-dasharray]="conn.length" [attr.stroke-dashoffset]="conn.length * (1 - conn.progress)"></line>
      }
    </svg>
    }
  </div>

  <!-- Enlaces superpuestos que aparecen al terminar el fade del video -->
  @if (showLinks) {
  <nav class="link-layer">
    @for (item of displayLinks; track item.route; let i = $index) {
    <a class="link typography-button-text {{ item.cls }}" #linkEl [attr.data-point]="item.pointId"
      [attr.data-anchor]="item.anchor" [routerLink]="item.route"
      [style.animationDelay.ms]="linksPhaseOffset + baseDelay + stagger * i">
      {{ item.key | t }}
    </a>
    }
  </nav>
  }
</section>

@if (showLinks) {
<p class="title-below typography-section-title">
  {{ 'home.title' | t }}
</p>
<br />

<!-- [autoplayMs]="4000"         tiempo que permanece cada foto -->
<!-- [transitionMs]="700"        velocidad del movimiento -->
<!-- [separatorRatio]="0.25"     franja al 25% del ancho -->
<!-- [separatorColor]="'#000'"   color de la franja -->
<!-- [fadeEdges]="false"         desactiva el fade momentÃ¡neamente -->
<app-carousel
  style="width:50vw;display:block;margin:0 auto"
  [images]="homeSlides"
  [autoplayMs]="7000"        
  [transitionMs]="2000"       
  [separatorRatio]="0.25"    
  [separatorColor]="'#000'"  
  [pauseOnHover]="true"
  [fadeEdges]="true"
  [fadeEdgeWidth]="0.03"
  [fadeColor]="'rgba(0,0,0,0.95)'"
  [height]="'calc(80vw * 7/16)'">
</app-carousel>

<br />

<p class="caption-below typography-body-text">
  {{ 'home.caption' | t }}
</p>
}