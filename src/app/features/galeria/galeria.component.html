<!-- Galería de miniaturas -->
<section class="galeria">
  @if (loading) {
  <p class="estado-carga">Cargando imágenes…</p>
  } @else if (!images.length) {
  <p class="aviso">No se han encontrado imágenes.</p>
  } @else {
  @for (img of images; track $index) {
  <!-- Miniatura como botón accesible -->
  <button type="button" class="thumb-btn" (click)="open($index)" (keyup.enter)="open($index)"
    (keyup.space)="open($index)" aria-label="Ampliar imagen {{ $index + 1 }}">
    <img class="thumb-img" [src]="img" alt="" />
  </button>
  }
  }
</section>

<!-- Lightbox -->
@if (selectedIndex !== null) {
<div class="lightbox" aria-modal="true" role="dialog" aria-label="Imagen ampliada">
  <!-- Botón cerrar (opcional, lo mantenemos como alternativa) -->
  <button type="button" class="lightbox-close" aria-label="Cerrar" (click)="close()" (keyup.enter)="close()"
    (keyup.space)="close()">×</button>

  <!-- Imagen ampliada: ahora cierra al hacer click -->
  <button type="button" class="lightbox-imgBtn" (click)="close()" (keyup.enter)="close()" (keyup.space)="close()"
    aria-label="Cerrar la imagen ampliada">
    <img class="lightbox-img" [src]="images[selectedIndex!]" alt="" />
  </button>
</div>
}