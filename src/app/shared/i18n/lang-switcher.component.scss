@use 'tokens' as *;
@use 'breakpoints' as *;

/* El host por encima de overlays */
:host{
  display: block;
  position: relative;
  z-index: 9500;

  /* controla separación menú↔botón en todos los tamaños */
  --menu-gap: 4px;
}

/* Contenedor: inline-flex + row-reverse = botón a la derecha, menú a la izquierda */
.switcher{
  position: relative;
  display: inline-flex;
  align-items: center;
  flex-direction: row-reverse;  /* ← botón a la derecha */
  gap: var(--menu-gap);         /* ← distancia ajustable */
}

/* Botón compacto (icono idioma) */
.switch{
  display: inline-flex; align-items: center; justify-content: center;
  width: 32px; height: 24px;
  padding: 0; margin: 0;
  background: transparent;
  color: $text-light;
  border: 1px solid $border-dk;
  border-radius: .375rem;
  cursor: pointer;
  outline: none;
}
.switch:focus-visible{ box-shadow: 0 0 0 2px rgba(255,255,255,.18); }

/* Escala ligera */
@include up($bp-md){ .switch{ width: 36px; height: 26px; } }
@include up($bp-lg){ .switch{ width: 40px; height: 28px; } }

/* Icono del botón */
.icon{
  display: block;
  width: 18px; height: auto;
}
@include up($bp-md){ .icon{ width: 20px; } }
@include up($bp-lg){ .icon{ width: 22px; } }

/* ======= MENÚ: ahora en FLUJO (no absoluto), a la IZQUIERDA del botón =======
   - Gracias a row-reverse, el menú queda a la izquierda.
   - El gap controla la separación. */
.menu{
  position: static;              /* ⬅️ ya no absoluto */
  z-index: 10000;
  pointer-events: auto;

  //list-style: none; margin: 0; padding: .16rem .18rem;
  list-style: none; margin: 0; padding: .12rem .14rem; /* más estrecho */

  background: black;
  border: 1px solid $border-dk;
  border-radius: .5rem;
  box-shadow: 0 8px 22px rgba(0,0,0,.35);

  display: grid;
  grid-auto-flow: row;           /* vertical */
  justify-items: center;
  gap: .14rem;
  min-width: 30px;
}

/* Opción del menú (bandera clicable) */
.opt{
  display: inline-flex; align-items: center; justify-content: center;
  padding: .12rem .14rem;
  background: transparent; color: inherit;
  border: 0; border-radius: .375rem;
  cursor: pointer;
}
.opt:hover{ outline: 1px solid rgba(255,255,255,.25); }
.opt:focus-visible{ outline: 2px solid rgba(255,255,255,.25); }

/* Banderas */
.flag{
  display: block;
  width: 18px; height: auto;
  border-radius: 1px;
  object-fit: cover;
}
@include up($bp-md){ .flag{ width: 20px; } }
@include up($bp-lg){ .flag{ width: 22px; } }

/* Texto solo para lectores de pantalla */
.sr-only{
  position: absolute; width: 1px; height: 1px; margin: -1px;
  padding: 0; overflow: hidden; clip: rect(0,0,0,0);
  white-space: nowrap; border: 0;
}
