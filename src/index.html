<!doctype html>
<html lang="es">

<head>
  <!-- Android/Chrome: color de la barra del navegador -->
  <meta name="theme-color" content="#000000">
  <!-- Tema claro/oscuro (opcional) -->
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000000">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
  <!-- iOS al añadir a pantalla de inicio (PWA) -->
  <meta name="mobile-web-app-capable" content="yes">
  <!-- Estilos de la barra de estado en PWA: default | black | black-translucent -->
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <meta charset="utf-8">
  <title>Creasia | Cultura entre oriente y occidente</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Creasia: cultura oriental, diseno sereno y contenido cuidado.">
  <link rel="icon" type="image/png" sizes="512x512" href="assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/x-icon" href="assets/icons/favicon.ico">

  <!-- Fuentes (Inter + Noto Serif JP) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Noto+Serif+JP:wght@500;700&display=swap"
    rel="stylesheet">

  <!-- 🔹 APLICAR IDIOMA LO ANTES POSIBLE (antes de que Angular inyecte los bundles) -->
  <script>
    (function () {
      try {
        var supported = ['es', 'en', 'zh'];

        // 1) ¿Viene ?lang= en la URL de entrada?
        var url = new URL(window.location.href);
        var qlang = url.searchParams.get('lang');
        var chosen = null;

        if (qlang) {
          qlang = (qlang + '').slice(0, 2).toLowerCase();
          if (supported.indexOf(qlang) !== -1) {
            chosen = qlang;
            // Persistimos para que el TranslationService lo coja como inicial
            try { localStorage.setItem('creasia:lang', chosen); } catch (e) { }
          }
          // Limpia la URL (opcional, sin recargar)
          url.searchParams.delete('lang');
          history.replaceState({}, '', url.toString());
        }

        // 2) Si no vino en la URL, prueba con lo guardado
        if (!chosen) {
          try {
            var saved = localStorage.getItem('creasia:lang');
            if (saved && supported.indexOf(saved) !== -1) {
              chosen = saved;
            }
          } catch (e) { }
        }

        // 3) Si ya sabemos idioma, ponlo en <html lang="..."> antes de pintar nada
        if (chosen) {
          document.documentElement.setAttribute('lang', chosen);
        }
      } catch (e) {
        // silencioso
      }
    })();
  </script>
</head>

<body>
  <app-root></app-root>
</body>

</html>